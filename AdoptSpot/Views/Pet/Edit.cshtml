@model AdoptSpot.Models.Pet

@{
    ViewData["Title"] = "Edit Pet";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="Edit" enctype="multipart/form-data" method="post">
    <input type="hidden" asp-for="Id" />
    <div class="form-group">
        <label asp-for="Name"></label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label>Upload new images:</label>
        <input type="file" name="newImages" id="newImages" multiple class="form-control-file" />
    </div>
    <div class="form-group">
        <label>Current Images:</label>
        <div class="row">
            @foreach (var image in Model.Images)
            {
                <div class="col-md-4">
                    <img src="@Url.Action("GetImage", "Image", new { id = image.Id })" class="img-fluid" alt="Image @image.Id" />
                </div>
            }
        </div>
    </div>
    <!-- ... -->

    <div id="vaccinesContainer">
        @if (Model.MedicalRecord != null)
        {
            int index = 0;
            foreach (var vaccine in Model.MedicalRecord.Vaccinations)
            {
                ViewData["Index"] = index;
                await Html.RenderPartialAsync("_EditVaccination", vaccine);
                index++;
            }
        }
        else
        {
            <p>No MedicalRecord found for this pet.</p>
        }
    </div>

  


<!-- ... -->


<div class="form-group">
    <label asp-for="Species"></label>
    <input asp-for="Species" class="form-control" />
    <span asp-validation-for="Species" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Age"></label>
    <input asp-for="Age" class="form-control" />
    <span asp-validation-for="Age" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="PetGender"></label>
    <input asp-for="PetGender" class="form-control" />
    <span asp-validation-for="PetGender" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Color"></label>
    <input asp-for="Color" class="form-control" />
    <span asp-validation-for="Color" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Breed"></label>
    <input asp-for="Breed" class="form-control" />
    <span asp-validation-for="Breed" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Description"></label>
    <textarea asp-for="Description" class="form-control"></textarea>
    <span asp-validation-for="Description" class="text-danger"></span>
</div>
<div class="form-group">
    <button type="submit" class="btn btn-primary">Update</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</div>
</form>
@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }

    <script>
        function toggleDetails(index) {
            var details = document.getElementById("details-" + index);
            if (details.classList.contains("d-none")) {
                details.classList.remove("d-none");
            } else {
                details.classList.add("d-none");
            }
        }
    </script>
}


